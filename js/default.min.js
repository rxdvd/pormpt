var _createClass=function(){function a(e,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||false;d.configurable=true;if("value" in d){d.writable=true}Object.defineProperty(e,d.key,d)}}return function(d,b,c){if(b){a(d.prototype,b)}if(c){a(d,c)}return d}}();function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(a,b){if(!a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b&&(typeof b==="object"||typeof b==="function")?b:a}function _inherits(b,a){if(typeof a!=="function"&&a!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:false,writable:true,configurable:true}});if(a){Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a}}var NavBar=function(c){_inherits(a,c);function a(){_classCallCheck(this,a);return _possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}_createClass(a,[{key:"render",value:function b(){return React.createElement("nav",null,React.createElement(NavHeader,{text:"lorem ipsum"}),React.createElement(NavLinks,null))}}]);return a}(React.Component);var NavHeader=function(c){_inherits(b,c);function b(){_classCallCheck(this,b);return _possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}_createClass(b,[{key:"render",value:function a(){return React.createElement("div",{className:"nav-header"},this.props.text)}}]);return b}(React.Component);var NavLinks=function(c){_inherits(a,c);function a(){_classCallCheck(this,a);return _possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}_createClass(a,[{key:"render",value:function b(){var d=[["home","/"],["example link 1","/"]];var e=d.map(function(f){return React.createElement(NavItem,{key:f[0],name:f[0],url:f[1]})});return React.createElement("div",{className:"nav-links"},e)}}]);return a}(React.Component);var NavItem=function(c){_inherits(a,c);function a(){_classCallCheck(this,a);return _possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}_createClass(a,[{key:"render",value:function b(){return React.createElement("a",{href:this.props.url,className:"nav-item"},React.createElement("div",null,this.props.name))}}]);return a}(React.Component);var Generator=function(c){_inherits(e,c);function e(n){_classCallCheck(this,e);var m=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));var l=[["time_sig","Time Signatures"],["rhythm_adj","Rhythm Descriptors"],["tempo","Tempo"],["emotive_adj","Mood Descriptors"],["game","Video Games"],["genre","Genres"],["style","Musical Forms"],["key_sig","Keys"],["scale","Scales and Modes"],["instr","Instrumentation"]];m.state={prompt:"",category:"time_sig",options:{},listCats:l,searchbar:"",held:{}};m.handleHold=m.handleHold.bind(m);m.handleRandomize=m.handleRandomize.bind(m);m.handleCopy=m.handleCopy.bind(m);m.handleCategorySelect=m.handleCategorySelect.bind(m);m.handleOptionCheck=m.handleOptionCheck.bind(m);m.handleOptionCheckMany=m.handleOptionCheckMany.bind(m);m.handleOptionSearch=m.handleOptionSearch.bind(m);l.forEach(function(o){m.state.held[o[0]]=false;ajax("/list/"+o[0]).then(function(p){var q={};p.split(",").forEach(function(r){q[r]=true});m.state.options[o[0]]=q},function(p){console.log(p)})});m.handleRandomize();return m}_createClass(e,[{key:"handleHold",value:function h(l){var m=this.state.held;m[l]=m[l]?false:true;this.setState({held:m})}},{key:"handleRandomize",value:function j(){var l=this;var m=[];for(x in this.state.options){for(y in this.state.options[x]){if(!this.state.options[x][y]){m.push(y)}}}m=m.length?"?exclude="+m.join(","):"";ajax("/generate"+m).then(function(o){if(l.state.prompt){var n=l.state.prompt.split(",").map(function(q,p){return l.state.held[l.state.listCats[p][0]]?q:o.split(",")[p]});l.setState({prompt:n.join(",")})}else{l.setState({prompt:o})}},function(n){console.error(n)})}},{key:"handleCopy",value:function g(){var n=this.state.prompt.split(",").join(" ");var m=document.createElement("textarea");m.value=n;m.style.opacity=0;document.body.appendChild(m);m.focus();m.select();document.execCommand("copy");document.body.removeChild(m);var l=document.querySelectorAll(".generator-output > span");[].forEach.call(l,function(o){o.style.animation="copytext 0.4s";setTimeout(function(){o.style.animation=null},500)})}},{key:"handleCategorySelect",value:function i(l){this.setState({category:l})}},{key:"handleOptionCheck",value:function d(l){var m=this.state.options;m[this.state.category][l]=m[this.state.category][l]?false:true;this.setState({options:m})}},{key:"handleOptionCheckMany",value:function f(l){var m=l.includes("all")?true:false;var n=this.state.options;for(k in n[this.state.category]){if(k.includes(this.state.searchbar)){n[this.state.category][k]=m}}this.setState({options:n});[].forEach.call(document.querySelectorAll("input[type=checkbox]"),function(o){o.checked=m})}},{key:"handleOptionSearch",value:function a(l){this.setState({searchbar:l})}},{key:"render",value:function b(){return React.createElement("div",{className:"container"},React.createElement(GeneratorMain,{onRandomize:this.handleRandomize,onCopy:this.handleCopy,prompt:this.state.prompt,categories:this.state.listCats.map(function(l){return l[0]}),onElementClick:this.handleHold,heldData:this.state.held}),React.createElement(GeneratorOptions,{onCheckMany:this.handleOptionCheckMany,onCategorySelect:this.handleCategorySelect,category:this.state.category,options:this.state.options,categories:this.state.listCats,onCheck:this.handleOptionCheck,onSearch:this.handleOptionSearch,search:this.state.searchbar}))}}]);return e}(React.Component);var GeneratorMain=function(c){_inherits(b,c);function b(){_classCallCheck(this,b);return _possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}_createClass(b,[{key:"render",value:function a(){return React.createElement("div",{className:"generator"},React.createElement(GeneratorOutput,{heldData:this.props.heldData,prompt:this.props.prompt,categories:this.props.categories,onElementClick:this.props.onElementClick}),React.createElement(ButtonPanel,{onRandomize:this.props.onRandomize,onCopy:this.props.onCopy}))}}]);return b}(React.Component);var GeneratorOutput=function(b){_inherits(d,b);function d(f){_classCallCheck(this,d);var e=_possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,f));e.handleClick=e.handleClick.bind(e);return e}_createClass(d,[{key:"handleClick",value:function a(f){this.props.onElementClick(f.target.id)}},{key:"render",value:function c(){var h=this;var e=this.props.prompt.split(",");var f=this.props.categories;var g=e.map(function(l,j){if(l.trim()!="False"){return React.createElement("span",{className:h.props.heldData[f[j]]?"held":"",key:f[j],id:f[j],onClick:h.handleClick},l)}});return React.createElement("div",{className:"generator-output"},g)}}]);return d}(React.Component);var ButtonPanel=function(b){_inherits(d,b);function d(e){_classCallCheck(this,d);var f=_possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e));f.handleClick=f.handleClick.bind(f);return f}_createClass(d,[{key:"handleClick",value:function a(f){switch(f.target.textContent){case"randomize":this.props.onRandomize();break;case"copy":this.props.onCopy();break}}},{key:"render",value:function c(){return React.createElement("div",{className:"button-panel"},React.createElement("button",{onClick:this.handleClick},"randomize"),React.createElement("button",{onClick:this.handleClick},"copy"))}}]);return d}(React.Component);var GeneratorOptions=function(b){_inherits(c,b);function c(g){_classCallCheck(this,c);var h=_possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,g));h.handleCheck=h.handleCheck.bind(h);h.handleCheckMany=h.handleCheckMany.bind(h);h.handleSearch=h.handleSearch.bind(h);return h}_createClass(c,[{key:"handleCheckMany",value:function a(g){this.props.onCheckMany(g.target.id)}},{key:"handleCheck",value:function f(g){this.props.onCheck(g)}},{key:"handleSearch",value:function e(g){this.props.onSearch(g)}},{key:"render",value:function d(){return React.createElement("div",{className:"generator-options"},React.createElement(GeneratorOptionsSelect,{category:this.props.category,onCategorySelect:this.props.onCategorySelect,categories:this.props.categories}),React.createElement(GeneratorOptionsSearchBar,{onSearch:this.handleSearch}),React.createElement("button",{className:"mark-all-none",id:"mark-all",onClick:this.handleCheckMany},"mark"),React.createElement("button",{className:"mark-all-none",id:"mark-none",onClick:this.handleCheckMany},"unmark"),React.createElement(GeneratorOptionsList,{options:this.props.options[this.props.category],onCheck:this.handleCheck,search:this.props.search}))}}]);return c}(React.Component);var GeneratorOptionsSelect=function(a){_inherits(b,a);function b(e){_classCallCheck(this,b);var f=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,e));f.handleChange=f.handleChange.bind(f);return f}_createClass(b,[{key:"handleChange",value:function c(f){this.props.onCategorySelect(f.target.value)}},{key:"render",value:function d(){var e=this.props.categories;var f=e.map(function(g){return React.createElement("option",{key:g[0],value:g[0]},g[1])});return React.createElement("select",{value:this.props.category,onChange:this.handleChange},f)}}]);return b}(React.Component);var GeneratorOptionsSearchBar=function(a){_inherits(b,a);function b(f){_classCallCheck(this,b);var e=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,f));e.handleSearch=e.handleSearch.bind(e);return e}_createClass(b,[{key:"handleSearch",value:function d(f){this.props.onSearch(f.target.value)}},{key:"render",value:function c(){return React.createElement("input",{type:"text",placeholder:"search",onChange:this.handleSearch})}}]);return b}(React.Component);var GeneratorOptionsList=function(d){_inherits(a,d);function a(f){_classCallCheck(this,a);var e=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f));e.handleCheck=e.handleCheck.bind(e);return e}_createClass(a,[{key:"handleCheck",value:function c(f){this.props.onCheck(f.target.nextElementSibling.textContent)}},{key:"render",value:function b(){var e=this;var g=void 0;try{g=Object.keys(this.props.options);if(this.props.search.length>0){g=g.filter(function(h){return h.includes(e.props.search)})}g=g.map(function(h){return React.createElement("div",{key:h},React.createElement("input",{type:"checkbox",value:h,defaultChecked:e.props.options[h],onChange:e.handleCheck}),React.createElement("label",null,h))})}catch(f){g=[]}return React.createElement("div",{className:"generator-options-list"},g)}}]);return a}(React.Component);var App=function(c){_inherits(b,c);function b(){_classCallCheck(this,b);return _possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}_createClass(b,[{key:"render",value:function a(){return React.createElement("div",null,React.createElement(NavBar,null),React.createElement(Generator,null))}}]);return b}(React.Component);ReactDOM.render(React.createElement(App,null),document.querySelector("#root"));function ajax(a){return new Promise(function(d,b){var c=new XMLHttpRequest();c.open("GET",a,true);c.onreadystatechange=function(){if(c.readyState===4){if(c.status===200){d(c.responseText)}else{b(c.status)}}};c.send()})};
var _createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var NavBar=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:"render",value:function(){return React.createElement("nav",null,React.createElement(NavHeader,{text:"pormpt"}),React.createElement(NavLinks,null))}}]),b}(React.Component),NavHeader=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:"render",value:function(){return React.createElement("div",{className:"nav-header"},this.props.text)}}]),b}(React.Component),NavLinks=function(a){function b(c){_classCallCheck(this,b);var d=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c));return d.handleClick=d.handleClick.bind(d),d}return _inherits(b,a),_createClass(b,[{key:"handleClick",value:function(){var d=document.querySelector(".full-dialog");null==d?(d=document.createElement("div"),d.className="full-dialog",document.querySelector(".container").appendChild(d),ReactDOM.render(React.createElement(AboutDialogBox,null),d)):d.parentElement.removeChild(d)}},{key:"render",value:function(){var d=[["OwO","javascript:void(0);",this.handleClick]],f=d.map(function(g){return React.createElement(NavItem,{key:g[0],name:g[0],url:g[1],onClick:g[2]})});return React.createElement("div",{className:"nav-links"},f)}}]),b}(React.Component),NavItem=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:"render",value:function(){return React.createElement("a",{href:this.props.url,onClick:this.props.onClick,className:"nav-item"},React.createElement("div",null,this.props.name))}}]),b}(React.Component),AboutDialogBox=function(a){function b(c){_classCallCheck(this,b);var d=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c));return d.handleClick=d.handleClick.bind(d),d}return _inherits(b,a),_createClass(b,[{key:"handleClick",value:function(){document.querySelector(".container").removeChild(document.querySelector(".full-dialog"))}},{key:"render",value:function(){return React.createElement("div",null,React.createElement("h1",null,"What's this?"),React.createElement("p",null,"This is a random generator that generates prompts for pieces of music that you can try to compose. There are a few things in place to try and make it not come up with complete nonsense but most of the time they won't make perfect sense either.",React.createElement("br",null),React.createElement("br",null),"Just so you don't have to spam the button too much to make it come up with anything remotely possible to create, I have included the option to turn off tags and also you can freeze parts of the prompt by clicking on them so they won't get randomized.",React.createElement("br",null),React.createElement("br",null),"By default it will come up with ideas that are based on video game music, but you can turn that off too."))}}]),b}(React.Component),Generator=function(a){function b(c){_classCallCheck(this,b);var d=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c)),f=[["time_sig","Time Signatures"],["rhythm_adj","Rhythm Descriptors"],["tempo","Tempo"],["emotive_adj","Mood Descriptors"],["game","Video Games"],["genre","Genres"],["style","Musical Forms"],["key_sig","Keys"],["scale","Scales and Modes"],["instr","Instrumentation"]];d.state={prompt:"",category:"time_sig",options:{},listCats:f,searchbar:"",held:{}},d.handleHold=d.handleHold.bind(d),d.handleRandomize=d.handleRandomize.bind(d),d.handleCopy=d.handleCopy.bind(d),d.handleCategorySelect=d.handleCategorySelect.bind(d),d.handleOptionCheck=d.handleOptionCheck.bind(d),d.handleOptionCheckMany=d.handleOptionCheckMany.bind(d),d.handleOptionSearch=d.handleOptionSearch.bind(d);var g=[];return function m(p,q){ajax("/list/"+f[p][0]).then(function(r){var s={};r.split(",").forEach(function(t){s[t]=!0}),g[p]=s,++p<f.length?m(p,q):q()},function(r){console.error(r)})}(0,function(){if(null!=localStorage.getItem("wordlist_options"))try{var p=JSON.parse(localStorage.getItem("wordlist_options")),q=[];for(k in p)q.push(Object.keys(p[k]).join());if(q=q.join(),q!=g.map(function(t){return Object.keys(t).join()}).join())for(var r=0;r<g.length;r++){for(k in g[r])"undefined"==typeof p[f[r][0]][k]&&(p[f[r][0]][k]=!1);for(k in p[f[r][0]])Object.keys(g[r]).includes(k)||delete p[f[r][0]][k]}return d.state.options=p,localStorage.setItem("wordlist_options",JSON.stringify(d.state.options)),d.forceUpdate(),void d.handleRandomize(!1)}catch(t){console.error(t),localStorage.removeItem("wordlist_options")}for(var s=0;s<g.length;s++)d.state.options[f[s][0]]=g[s];d.forceUpdate(),d.handleRandomize(!1)}),d}return _inherits(b,a),_createClass(b,[{key:"handleHold",value:function(d){var f=this.state.held;f[d]=!f[d],this.setState({held:f})}},{key:"handleRandomize",value:function(){var d=this,f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;if(document.querySelector("#randomize-button").disabled=!0,f){header=document.querySelector(".nav-header").textContent,lastLetter=header.slice(-1),firstLetter=header.slice(0,1),header=header.slice(1,-1);for(var j,g=0;10>g;g++)j=header.charAt(Math.floor(Math.random()*header.length)),header=header.replace(j,""),header+=j;header=firstLetter+header+lastLetter,document.querySelector(".nav-header").textContent=header}var l=[];for(x in this.state.options)for(y in this.state.options[x])this.state.options[x][y]||l.push(y);l=l.length?"?exclude="+l.join(","):"",ajax("/generate"+l).then(function(m){if(document.querySelector("#randomize-button").disabled=!1,d.state.prompt){var p=d.state.prompt.split(",").map(function(q,r){return d.state.held[d.state.listCats[r][0]]?q:m.split(",")[r]});d.setState({prompt:p.join(",")})}else d.setState({prompt:m})},function(m){document.querySelector("#randomize-button").disabled=!1,console.error(m)})}},{key:"handleCopy",value:function(){var d=this.state.prompt.split(",").join(" "),f=document.createElement("textarea");f.value=d,f.style.opacity=0,document.body.appendChild(f),f.focus(),f.select(),document.execCommand("copy"),document.body.removeChild(f);var g=document.querySelectorAll(".generator-output > span");[].forEach.call(g,function(j){j.style.animation="copytext 0.4s",setTimeout(function(){j.style.animation=null},500)})}},{key:"handleCategorySelect",value:function(d){this.setState({category:d})}},{key:"handleOptionCheck",value:function(d){var f=this.state.options;f[this.state.category][d]=!f[this.state.category][d],this.setState({options:f}),localStorage.setItem("wordlist_options",JSON.stringify(this.state.options))}},{key:"handleOptionCheckMany",value:function(d){var f=!!d.includes("all"),g=this.state.options;for(k in g[this.state.category])k.includes(this.state.searchbar)&&(g[this.state.category][k]=f);this.setState({options:g}),localStorage.setItem("wordlist_options",JSON.stringify(this.state.options)),[].forEach.call(document.querySelectorAll("input[type=checkbox]"),function(j){j.checked=f})}},{key:"handleOptionSearch",value:function(d){this.setState({searchbar:d})}},{key:"render",value:function(){return React.createElement("div",{className:"container"},React.createElement(GeneratorMain,{onRandomize:this.handleRandomize,onCopy:this.handleCopy,prompt:this.state.prompt,categories:this.state.listCats.map(function(d){return d[0]}),onElementClick:this.handleHold,heldData:this.state.held}),React.createElement(GeneratorOptions,{onCheckMany:this.handleOptionCheckMany,onCategorySelect:this.handleCategorySelect,category:this.state.category,options:this.state.options,categories:this.state.listCats,onCheck:this.handleOptionCheck,onSearch:this.handleOptionSearch,search:this.state.searchbar}))}}]),b}(React.Component),GeneratorMain=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:"render",value:function(){return React.createElement("div",{className:"generator"},React.createElement(GeneratorOutput,{heldData:this.props.heldData,prompt:this.props.prompt,categories:this.props.categories,onElementClick:this.props.onElementClick}),React.createElement(ButtonPanel,{onRandomize:this.props.onRandomize,onCopy:this.props.onCopy}))}}]),b}(React.Component),GeneratorOutput=function(a){function b(c){_classCallCheck(this,b);var d=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c));return d.handleClick=d.handleClick.bind(d),d}return _inherits(b,a),_createClass(b,[{key:"handleClick",value:function(d){this.props.onElementClick(d.target.id)}},{key:"render",value:function(){var d=this,f=this.props.prompt.split(","),g=this.props.categories,j=f.map(function(l,m){if("False"!=l.trim())return React.createElement("span",{className:d.props.heldData[g[m]]?"held":"",key:g[m],id:g[m],onClick:d.handleClick},l)});return React.createElement("div",{className:"generator-output"},j)}}]),b}(React.Component),ButtonPanel=function(a){function b(c){_classCallCheck(this,b);var d=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c));return d.handleClick=d.handleClick.bind(d),d}return _inherits(b,a),_createClass(b,[{key:"handleClick",value:function(d){switch(d.target.textContent){case"randomize":this.props.onRandomize();break;case"copy":this.props.onCopy();}}},{key:"render",value:function(){return React.createElement("div",{className:"button-panel"},React.createElement("button",{id:"randomize-button",onClick:this.handleClick},"randomize"),React.createElement("button",{onClick:this.handleClick},"copy"))}}]),b}(React.Component),GeneratorOptions=function(a){function b(c){_classCallCheck(this,b);var d=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c));return d.handleCheck=d.handleCheck.bind(d),d.handleCheckMany=d.handleCheckMany.bind(d),d.handleSearch=d.handleSearch.bind(d),d}return _inherits(b,a),_createClass(b,[{key:"handleCheckMany",value:function(d){this.props.onCheckMany(d.target.id)}},{key:"handleCheck",value:function(d){this.props.onCheck(d)}},{key:"handleSearch",value:function(d){this.props.onSearch(d)}},{key:"render",value:function(){return React.createElement("div",{className:"generator-options"},React.createElement(GeneratorOptionsSelect,{category:this.props.category,onCategorySelect:this.props.onCategorySelect,categories:this.props.categories}),React.createElement(GeneratorOptionsSearchBar,{onSearch:this.handleSearch}),React.createElement("button",{className:"mark-all-none",id:"mark-all",onClick:this.handleCheckMany},"mark"),React.createElement("button",{className:"mark-all-none",id:"mark-none",onClick:this.handleCheckMany},"unmark"),React.createElement(GeneratorOptionsList,{options:this.props.options[this.props.category],onCheck:this.handleCheck,search:this.props.search}))}}]),b}(React.Component),GeneratorOptionsSelect=function(a){function b(c){_classCallCheck(this,b);var d=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c));return d.handleChange=d.handleChange.bind(d),d}return _inherits(b,a),_createClass(b,[{key:"handleChange",value:function(d){this.props.onCategorySelect(d.target.value)}},{key:"render",value:function(){var d=this.props.categories,f=d.map(function(g){return React.createElement("option",{key:g[0],value:g[0]},g[1])});return React.createElement("select",{value:this.props.category,onChange:this.handleChange},f)}}]),b}(React.Component),GeneratorOptionsSearchBar=function(a){function b(c){_classCallCheck(this,b);var d=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c));return d.handleSearch=d.handleSearch.bind(d),d}return _inherits(b,a),_createClass(b,[{key:"handleSearch",value:function(d){this.props.onSearch(d.target.value)}},{key:"render",value:function(){return React.createElement("input",{type:"text",placeholder:"search",onChange:this.handleSearch})}}]),b}(React.Component),GeneratorOptionsList=function(a){function b(c){_classCallCheck(this,b);var d=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c));return d.handleCheck=d.handleCheck.bind(d),d}return _inherits(b,a),_createClass(b,[{key:"handleCheck",value:function(d){this.props.onCheck(d.target.nextElementSibling.textContent)}},{key:"render",value:function(){var f,d=this;try{f=Object.keys(this.props.options),0<this.props.search.length&&(f=f.filter(function(g){return g.includes(d.props.search)})),f.sort(),f=f.map(function(g){return React.createElement("div",{key:g},React.createElement("input",{type:"checkbox",value:g,defaultChecked:d.props.options[g],onChange:d.handleCheck}),React.createElement("label",null,g))})}catch(g){f=[]}return React.createElement("div",{className:"generator-options-list"},f)}}]),b}(React.Component),App=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:"render",value:function(){return React.createElement("div",null,React.createElement(NavBar,null),React.createElement(Generator,null))}}]),b}(React.Component);ReactDOM.render(React.createElement(App,null),document.querySelector("#root"));function ajax(a){return new Promise(function(b,c){var d=new XMLHttpRequest;d.open("GET",a,!0),d.onreadystatechange=function(){4===d.readyState&&(200===d.status?b(d.responseText):c(d.status))},d.send()})}